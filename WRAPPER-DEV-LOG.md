# WRAPPER-DEV-LOG

ラッパー開発の進捗・意思決定・課題を記録するログです。日付単位で短く、決定と根拠が追跡できるように記載してください。

テンプレート：

## YYYY-MM-DD
- 背景／スコープ：
- 決定事項：
  - 
- 根拠・検討メモ：
  - 
- 未解決事項：
  - 
- 次アクション：
  - 
- リスク／課題：
  - 
- 参照リンク：
  - `README-FOR-WRAPPER.md` の該当節など

---

## 2025-01-01（初期化例）
- 背景／スコープ：本リポジトリの既存コードを改変せず、`wrapper/` で機能を合成する。
- 決定事項：仕様書は `README-FOR-WRAPPER.md`、ログは本ファイルで管理。
- 根拠・検討メモ：upstream 連携のため、既存ファイルの変更は最小化が必要。
- 未解決事項：最小 CLI の要件確定。
- 次アクション：CLI 雛形の作成、主要ユースケースの列挙。
- リスク／課題：依存バージョン差異／動作環境差異。
- 参照リンク：`AGENTS.md`

---

## 2025-08-28
- 背景／スコープ：Windows 向けラッパーアプリ初期実装。GUI 自動起動と Whisper API 互換のファイル文字起こし API を追加。
- 決定事項：
  - `wrapper/cli/main.py` で `whisperlivekit.basic_server` をサブプロセス起動し、ブラウザを開く。
  - `wrapper/api/server.py` に `/v1/audio/transcriptions` エンドポイントを実装。
- 根拠・検討メモ：既存コードを変更せず WebSocket `/asr` を利用するため、ffmpeg で PCM 変換後に WebSocket へストリーム。
- 未解決事項：エラーハンドリングの詳細、設定ファイル化。
- 次アクション：設定テンプレートの整備、PyInstaller/MSIX での配布検証。
- リスク／課題：ffmpeg 未インストール環境での利用者体験、依存ライブラリのバージョン差異。
- 参照リンク：`README-FOR-WRAPPER.md` のインターフェース節。

---

## 2025-08-30
- 背景／スコープ：MSIX 形式での配布を想定し、必要な追加実装とドキュメント整備を検討。
- 決定事項：
  - MSIX ビルド手順を仕様書に追記。
  - `wrapper/scripts/build_msix.ps1` を雛形として追加。
- 根拠・検討メモ：PyInstaller→makeappx→signtool のフローが一般的であり、設定移行も必要。
- 未解決事項：`AppxManifest.xml` の詳細、署名証明書の扱い。
- 次アクション：ビルドスクリプトの実装詳細と設定移行ロジックの検討。
- リスク／課題：証明書管理、MSIX パッケージの検証手間。
- 参照リンク：`README-FOR-WRAPPER.md` の MSIX パッケージング節。

---

## 2025-08-31
- 背景／スコープ：GUI からポート番号を指定し、API の起動・停止と自動起動モードを追加。
- 決定事項：
  - `wrapper/app/gui.py` にポート入力フィールドと Start/Stop ボタン、Auto-start チェックを実装。
  - `wrapper/api/server.py` が環境変数 `WRAPPER_BACKEND_HOST`/`WRAPPER_BACKEND_PORT` を参照。
- 根拠・検討メモ：環境依存値を GUI で柔軟に操作し、ユーザー操作で API を制御できるようにするため。
- 未解決事項：設定値の永続化、GUI のレイアウト改善。
- 次アクション：設定保存機構の検討と自動テストの追加。
- リスク／課題：サブプロセス管理の安定性、ポート競合時のユーザー通知。
- 参照リンク：`README-FOR-WRAPPER.md` のインターフェース節。

---

## 2025-09-02
- 背景／スコープ：ポート自動割り当てとエンドポイント表示機能の追加。
- 決定事項：
  - GUI 起動時に空きポートを自動選択し入力欄へ表示する。
  - Backend Web UI・WebSocket `/asr`・ファイル文字起こし API の各エンドポイントを GUI に表示し、コピー用ボタンを設置する。
- 根拠・検討メモ：ポート競合の回避とエンドポイント共有の利便性向上のため。
- 未解決事項：設定値の永続化方式。
- 次アクション：設定保存機構の検討。
- リスク／課題：起動直後に他プロセスが同ポートを使用する可能性。
- 参照リンク：`README-FOR-WRAPPER.md` のインターフェース節。

